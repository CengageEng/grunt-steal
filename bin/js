#!/bin/sh
# This script checks for arguments, if they don't exist it opens the Rhino dialog
# if arguments do exist, it loads the script in the first argument and passes the other arguments to the script
# ie: ./js steal/script/controller Todo

CP="${0%/*}/../rhino/js.jar"

printf "##### Classpath $CP\n"

exit 0

ERRORLEV=0
if [ $1 = "-e" ]
then
	echo 'ERROR REPORTING ACTIVATED'
	ERRORLEV=1
	shift
fi

ARGS=[
for arg
do
  if [ $arg != $1 ]
  then
    ARGS=$ARGS"'$arg'",
  fi
done
ARGS=$ARGS]
printf "java -Xmx1024m -Xss2048k -cp $CP org.mozilla.javascript.tools.shell.Main -e _args=$ARGS -opt -1 -e load('$1')\n"
java -Xmx1024m -Xss2048k -cp $CP org.mozilla.javascript.tools.shell.Main -e _args=$ARGS -opt -1 -e 'load('"'"$1"'"')'
ret=$?
if [ "$ERRORLEV" = "1" -o "$ret" -ne "0" ]
then
	exit $ret
fi
